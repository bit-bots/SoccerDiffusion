"""Add NAO elbow joint

Revision ID: 14ae0e795470
Revises: 3f1574e89695
Create Date: 2025-01-23 17:01:45.686722

"""

from collections.abc import Sequence
from typing import Union

import sqlalchemy as sa
from alembic import op

# revision identifiers, used by Alembic.
revision: str = "14ae0e795470"
down_revision: Union[str, None] = "3f1574e89695"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table("JointCommands") as batch_op:
        batch_op.add_column(sa.Column("RElbowYaw", sa.Float(), nullable=False))
        batch_op.create_check_constraint(
            op.f("ck_JointCommands_RElbowYaw_value"), "RElbowYaw >= 0 AND RElbowYaw < 2 * pi()"
        )

        batch_op.add_column(sa.Column("LElbowYaw", sa.Float(), nullable=False))
        batch_op.create_check_constraint(
            op.f("ck_JointCommands_LElbowYaw_value"), "LElbowYaw >= 0 AND LElbowYaw < 2 * pi()"
        )

    with op.batch_alter_table("JointStates") as batch_op:
        batch_op.add_column(sa.Column("RElbowYaw", sa.Float(), nullable=False))
        batch_op.create_check_constraint(
            op.f("ck_JointStates_LElbowYaw_value"), "LElbowYaw >= 0 AND LElbowYaw < 2 * pi()"
        )

        batch_op.add_column(sa.Column("LElbowYaw", sa.Float(), nullable=False))
        batch_op.create_check_constraint(
            op.f("ck_JointStates_RElbowYaw_value"), "RElbowYaw >= 0 AND RElbowYaw < 2 * pi()"
        )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table("JointCommands") as batch_op:
        batch_op.drop_constraint("ck_JointCommands_RElbowYaw_value")
        batch_op.drop_column("RElbowYaw")

        batch_op.drop_constraint("ck_JointCommands_LElbowYaw_value")
        batch_op.drop_column("LElbowYaw")

    with op.batch_alter_table("JointStates") as batch_op:
        batch_op.drop_constraint("ck_JointStates_RElbowYaw_value")
        batch_op.drop_column("RElbowYaw")

        batch_op.drop_constraint("ck_JointStates_LElbowYaw_value")
        batch_op.drop_column("LElbowYaw")
    # ### end Alembic commands ###
